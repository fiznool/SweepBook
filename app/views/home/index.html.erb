<div id="container" class="container">
	<header>
		<h1 id="app_title" class="heading">All hail, mighty <strong>SweepBook</strong></h1>
		<h1 class="heading"><small>When will our runners finish? Drag the slider and donate now!</small></h1>
	</header>

	<div id="main" role="main">
		<div id="warning-alert" class="alert-message warning">
		    <a id="warning-alert-close" class="close" href="#">&times;</a>
		    <p id="warning-alert-msg-already-taken" class="warning-alert-msg"><strong>Whoops!</strong> Looks like you chose a time that is already taken. Use the slider to choose a free slot, and try again...</p>
			<p id="warning-alert-msg-none-selected" class="warning-alert-msg"><strong>Whoops!</strong> You need to select at least one runner to enter...</p>
		</div>
		<div class="row">
			<div id="sweep_table" class="span7 columns">
				<!-- Here begins the sweep table, all contents in the #sweep_table div should be dynamically created on the server side -->

				
					<div id="sweep-table-header-row" class="row">
						
							<% @competitors.each do |c| %>
							<div class="span3 columns sweep-table-competitor-name" data-competitor-id="<%= c.id %>">
								<div class="input-prepend slider-competitor-label">
									<label class="add-on active"><input type="checkbox" checked="checked"></label>
									<span id="competitor-name-<%= c.id %>" class="uneditable-input competitor-name-active"><%= c.name %></span>
								</div>
							</div> <!-- Dynamic - enter up to 4 rows with competitor names -->
							<% end %>
						
					</div>

					<div class="row">
						<% @competitors.each do |c| %>
						<div id="slider-label-<%= c.id %>" data-competitor-id="<%= c.id %>" class="span3 columns slider-label"></div>
						<% end %>
					</div>

					<div class="row">
						<% @competitors.each do |c| %>
						<div class="span3 columns slider-ctn"><div id="slider-<%= c.id %>" data-competitor-id="<%= c.id %>" class="sweep-slider"></div></div>
						<% end %>
					</div>
				
			</div> <!-- #sweep-table -->

			<div id="sweep_actions" class="span6 columns">
				<div id="donate_btn_container">
					<!-- TODO make donate_btn link to donation modal using href, progressive enhancement -->
					<a id="donate_btn" href="#" class="btn large success" style="width: 270px; margin: 0px 20px; text-align:center;">Enter Sweepstake</a>
				</div>
				<div id="event_info" class="alert-message block-message info">
					<!-- Dynamic: all content in the #event_info div should be pulled from the DB -->
					<h3 class="heading"><%= @event.name %></h3>
					<p class="event_info_para"><%= @event.info %></p>	
					<%= image_tag "goulahee.jpg" %>
				</div>
			</div> <!-- #sweep_actions -->
		</div> <!-- end of row -->
	</div> <!-- end of #main -->
</div> <!--! end of #container -->

<!-- This div is to grey out the entire background when the modal appears -->
<!-- TODO check X-platform compatibility -->
<div id="donate-modal-reveal" class="reveal-modal">
	<h2>Almost there!</h2>
	<p>There's just a few little things left to do.</p>
	<ul id="donate-steps" class="unstyled">
		<li id="donate-label-step1">
			<h4>Step 1</h4>
			<p>Connect to Facebook</p>
		</li>
		<li id="donate-label-step2">
			<h4>Step 2</h4>
			<p>Reserve your choice</p>
		</li>
		<li id="donate-label-step3">
			<h4>Step 3</h4>
			<p>Place your donation</p>
		</li>
		<li id="donate-label-step4">
			<h4>Step 4</h4>
			<p>Post to your wall</p>
		</li>
	</ul>
	<div id="donate-action-zone">
		<div id="donate-action-step1">
			<h5>Shake hands with Facebook</h5>
			<p>Before you confirm your choices, you need to connect to Facebook. This will let us contact you if you win the sweepstake.</p>
			<p>To Connect with Facebook, click the button below.</p>
			<!-- Put Facebook Connect button here! -->
			
                        <fb:login-button perms="publish_stream,offline_access"
                          show-faces="true"></fb:login-button>
			<a class="close-reveal-modal modal-dismiss">&#215;</a>
		</div>
		<div id="donate-action-step2">
			<h5>You chose the following times:</h5>
			<ul id="donation-modal-choices-list">
				<!-- Filled in by JS -->
			</ul>
			<p>If you are OK with these times, click the button below to proceed.</p>
			<p>If you need to change your choices, just click the X in the top right hand corner of this pop-up box to return.</p>
			<a class="close-reveal-modal modal-dismiss">&#215;</a>
		</div>
		<div id="donate-action-step3">
			<h5>Hands in pockets time...</h5>
			<p>Your choices have been saved... now, its time to donate!</p>
			<p>We are running for the MS Trust, who are doing wonderful things for people with multiple sclerosis. We suggest that you donate Â£3 per choice you made, but any extra would be gratefully received.</p>
			<p>We are using <strong><a class="donation-anchor" href="http://www.justgiving.com" target="blank">Just Giving</a></strong> to take your donation. Click on the button below to visit the Virgin Money Giving site.
				It will open a new window - once you've finished donating, come back here for the last step.</p>
				<a id="donation-external-btn" class="btn primary donation-anchor" href="http://www.justgiving.com" target="blank">Donate on Just Giving site</a>
			</div>
			<div id="donate-action-step4">
				<h5>You are awesome.</h5>
				<p>Thank you a thousand times for taking the time to donate to our good cause. Your money will help the MS Trust to continue their brilliant work.</p>
				<p>We would like to post a short message to your wall, telling the world (or at least your friends) how generous you have been. This will also help us to get the word out about our run and hopefully raise more money for MS Trust.</p>
				<h2>Need to work out what goes here...</h2>
			</div>
			<div id="donate-action-ajax-error">
				<h5>Oh dear, something went wrong.</h5>
				<p>This is embarrassing. It looks like somebody else might have taken your chosen slot, after all.</p>
				<p>I'm afraid you'll need to go back to the main page, and choose again. Press the button below to return.</p>
				<a class="close-reveal-modal modal-dismiss">&#215;</a>
				<a id="donate-action-close-btn" href="#" class="btn primary modal-dismiss">Choose Again</a>
			</div>
		</div>
		<div id="donate-loading-spinner"></div>
		<a id="donate-action-next-btn" href="#" class="btn primary">Confirm</a>
		<a id="donate-action-finish-btn" href="#" class="btn success modal-dismiss">Finish</a>
	</div> <!-- end of #donate-modal-reveal -->
